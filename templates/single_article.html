{% extends "base.html" %}

{% block title %}{{ article.title }} - O Co Zapytać{% endblock %}

{% block content %}
<!-- Breadcrumb -->
<section class="custom-page-header py-3" style="background-color: #f8fafc;">
    <div class="container">
        <nav aria-label="breadcrumb">
            <ol class="breadcrumb mb-0" style="font-size: 0.875rem;">
                <li class="breadcrumb-item"><a href="/" style="color: #2563eb; text-decoration: none;">Strona główna</a></li>
                <li class="breadcrumb-item"><a href="/articles" style="color: #2563eb; text-decoration: none;">Artykuły</a></li>
                <li class="breadcrumb-item active" aria-current="page" style="color: #6b7280;">{{ article.title }}</li>
            </ol>
        </nav>
    </div>
</section>

<!-- Article Content -->
<section class="custom-about-section py-5">
    <div class="container">
        <div class="row justify-content-center">
            <div class="col-lg-8">
                <!-- Article Header -->
                <div class="article-header mb-5">
                    <div class="mb-3">
                        <span class="article-category" style="display: inline-block; background-color: #dbeafe; color: #1e40af; padding: 0.5rem 1rem; border-radius: 6px; font-size: 0.875rem; font-weight: 500;">
                            {{ article.category }}
                        </span>
                    </div>
                    
                    <h1 class="article-title mb-4" style="font-size: 2.5rem; font-weight: 700; color: #1e293b; line-height: 1.2;">
                        {{ article.title }}
                    </h1>
                    
                    <div class="article-meta mb-4" style="display: flex; align-items: center; gap: 2rem; color: #6b7280; font-size: 0.875rem; padding-bottom: 2rem; border-bottom: 1px solid #e2e8f0;">
                        <span class="article-author" style="font-weight: 500; color: #374151;">
                            <i class="fas fa-user me-1"></i>{{ article.author }}
                        </span>
                        <span class="article-date">
                            <i class="fas fa-calendar me-1"></i>{{ article.published_at.strftime('%d.%m.%Y') if article.published_at else 'Nie opublikowano' }}
                        </span>
                        <span class="article-read-time">
                            <i class="fas fa-clock me-1"></i>{{ article.read_time }}
                        </span>
                    </div>
                    
                    <!-- Article Excerpt -->
                    {% if article.excerpt %}
                    <div class="article-excerpt mb-4" style="font-size: 1.25rem; color: #64748b; font-style: italic; line-height: 1.6; padding: 1.5rem; background-color: #f8fafc; border-left: 4px solid #2563eb; border-radius: 0 6px 6px 0;">
                        {{ article.excerpt }}
                    </div>
                    {% endif %}
                </div>

                <!-- YouTube Video Section (if video_url exists) -->
                {% if article.video_url %}
                <div class="video-section mb-5">
                    <div class="video-container" style="position: relative; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); border-radius: 12px; padding: 2rem; margin: 2rem 0;">
                        <div class="row align-items-center">
                            <div class="col-md-8">
                                <h3 style="color: white; font-size: 1.5rem; font-weight: 600; margin-bottom: 1rem;">
                                    <i class="fab fa-youtube me-2" style="color: #ff0000;"></i>
                                    Zobacz wideo do tego artykułu
                                </h3>
                                <p style="color: rgba(255,255,255,0.9); margin-bottom: 1.5rem; line-height: 1.6;">
                                    Obejrzyj szczegółowe omówienie tematu w formie wideo. Znajdziesz tam dodatkowe przykłady i praktyczne wskazówki.
                                </p>
                                <a href="{{ article.video_url }}" target="_blank" class="btn btn-custom-white" style="background-color: white; color: #2563eb; padding: 12px 24px; border-radius: 6px; text-decoration: none; font-weight: 500; display: inline-flex; align-items: center; gap: 0.5rem;">
                                    <i class="fas fa-play"></i>
                                    Obejrzyj na YouTube
                                </a>
                            </div>
                            <div class="col-md-4 text-center">
                                <div style="background-color: rgba(255,255,255,0.1); border-radius: 8px; padding: 2rem; backdrop-filter: blur(10px);">
                                    <i class="fab fa-youtube" style="font-size: 4rem; color: #ff0000;"></i>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                {% endif %}

                <!-- Article Content -->
                <div class="article-content" style="font-size: 1.125rem; line-height: 1.8; color: #374151;">
                    {{ article.content | safe }}
                </div>

                <!-- Article Footer -->
                <div class="article-footer mt-5 pt-4" style="border-top: 1px solid #e2e8f0;">
                    <div class="row align-items-center">
                        <div class="col-md-6">
                            <div class="article-tags">
                                <span style="color: #6b7280; font-size: 0.875rem; margin-right: 1rem;">Kategoria:</span>
                                <span class="badge" style="background-color: #dbeafe; color: #1e40af; padding: 0.5rem 1rem; border-radius: 6px; font-size: 0.875rem;">
                                    {{ article.category }}
                                </span>
                            </div>
                        </div>
                        <div class="col-md-6 text-md-end">
                            <div class="article-share">
                                <span style="color: #6b7280; font-size: 0.875rem; margin-right: 1rem;">Udostępnij:</span>
                                <a href="#" class="btn btn-sm btn-outline-primary me-2" style="border: 1px solid #2563eb; color: #2563eb; padding: 0.5rem 1rem; border-radius: 4px; text-decoration: none; font-size: 0.875rem;">
                                    <i class="fab fa-facebook-f"></i>
                                </a>
                                <a href="#" class="btn btn-sm btn-outline-primary me-2" style="border: 1px solid #2563eb; color: #2563eb; padding: 0.5rem 1rem; border-radius: 4px; text-decoration: none; font-size: 0.875rem;">
                                    <i class="fab fa-twitter"></i>
                                </a>
                                <a href="#" class="btn btn-sm btn-outline-primary" style="border: 1px solid #2563eb; color: #2563eb; padding: 0.5rem 1rem; border-radius: 4px; text-decoration: none; font-size: 0.875rem;">
                                    <i class="fab fa-linkedin-in"></i>
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Related Articles Section -->
<section class="custom-featured-articles py-5" style="background-color: #f8fafc;">
    <div class="container">
        <div class="row justify-content-center">
            <div class="col-lg-8">
                <h2 class="section-title mb-4" style="text-align: center; color: #1e293b; position: relative;">
                    Powiązane artykuły
                </h2>
                <div class="row g-4" id="relatedArticles">
                    <!-- Related articles will be loaded here via HTMX or server-side -->
                    <div class="col-12 text-center">
                        <p style="color: #6b7280;">Ładowanie powiązanych artykułów...</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Newsletter Section -->
<section class="custom-newsletter" id="newsletter">
    <div class="container">
        <div class="newsletter-content">
            <h2>Bądź na bieżąco</h2>
            <p>Zapisz się do naszego newslettera i otrzymuj najnowsze artykuły bezpośrednio na swoją skrzynkę e-mail.</p>
            <form class="newsletter-form" 
                  hx-post="http://localhost:8000/api/v1/users/subscribe" 
                  hx-target="#newsletter-result"
                  hx-swap="innerHTML">
                <input type="email" name="email" placeholder="Twój adres e-mail" required>
                <button type="submit" class="btn btn-custom-white">Zapisz się</button>
            </form>
            <div id="newsletter-result"></div>
        </div>
    </div>
</section>
{% endblock %}

{% block scripts %}
<!-- Font Awesome for icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">

<script>
// Smooth scrolling for anchor links
document.addEventListener('DOMContentLoaded', function() {
    // Add smooth scrolling to all links with hash
    const links = document.querySelectorAll('a[href^="#"]');
    links.forEach(link => {
        link.addEventListener('click', function(e) {
            e.preventDefault();
            const target = document.querySelector(this.getAttribute('href'));
            if (target) {
                target.scrollIntoView({
                    behavior: 'smooth'
                });
            }
        });
    });
    
    // Load related articles (you can implement this later)
    // loadRelatedArticles('{{ article.category }}', {{ article.id }});
});

// Function to load related articles (placeholder)
function loadRelatedArticles(category, currentArticleId) {
    // This can be implemented later to fetch related articles
    // via HTMX or JavaScript fetch
}
</script>
{% endblock %}
